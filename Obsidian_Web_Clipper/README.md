## Import articles from a browser to Obsidian in Markdown (bookmarklet)

### Creating the bookmarklet
1. Copy and customize the script as desired.
2. Encode it as a URL using a service such as [URL Encoder](https://www.urlencoder.io).
   - Copy the entire text after "javascript:" including the space after the colon and before "Promise".
3. Save the encoded URL as a bookmark in your browser of choice.
	- Remember to insert 'javascript:' in the address before the script.

This script will generate a new note in Obsidian containing the content of the current webpage.
It utilizes Obsidian's [callout](https://help.obsidian.md/How+to/Use+callouts) ~~and [tags](https://help.obsidian.md/How+to/Working+with+tags)~~ syntax.
I've been using this since forever so it is hard to trace back the original source, but it looks like I've forked the script from [Stephan "Kepano" Ango's gist](https://gist.github.com/kepano/90c05f162c37cf730abb8ff027987ca3) and over time modified it to work better with my exact workflow.

Removed:
1. const tags
2. changed file directory
3. various other smaller cosmetic changes

### JavaScript function
**Can be found in the Obsidian_Web_Clipper.js file in this repo**

### Bookmarklet
The final script will look something like the following after formatting (UTF-8):
```
javascript:%20Promise.all%28%5B%0A%20%20import%28%22https%3A%2F%2Funpkg.com%2Fturndown%406.0.0%3Fmodule%22%29%2C%0A%20%20import%28%22https%3A%2F%2Funpkg.com%2F%40tehshrike%2Freadability%400.2.0%22%29%2C%0A%5D%29.then%28async%20%28%5B%7B%20default%3A%20Turndown%20%7D%2C%20%7B%20default%3A%20Readability%20%7D%5D%29%20%3D%3E%20%7B%0A%20%20const%20vault%20%3D%20%22Jarvis%22%3B%0A%20%20const%20folder%20%3D%20%22%F0%9F%93%96%20Bookshelf%2FArticle%2FUnread%22%3B%0A%20%20function%20getSelectionHtml%28%29%20%7B%0A%20%20%20%20var%20html%20%3D%20%22%22%3B%0A%20%20%20%20if%20%28typeof%20window.getSelection%20%21%3D%20%22undefined%22%29%20%7B%0A%20%20%20%20%20%20var%20sel%20%3D%20window.getSelection%28%29%3B%0A%20%20%20%20%20%20if%20%28sel.rangeCount%29%20%7B%0A%20%20%20%20%20%20%20%20var%20container%20%3D%20document.createElement%28%22div%22%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20len%20%3D%20sel.rangeCount%3B%20i%20%3C%20len%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20container.appendChild%28sel.getRangeAt%28i%29.cloneContents%28%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20html%20%3D%20container.innerHTML%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20if%20%28typeof%20document.selection%20%21%3D%20%22undefined%22%29%20%7B%0A%20%20%20%20%20%20if%20%28document.selection.type%20%3D%3D%20%22Text%22%29%20%7B%0A%20%20%20%20%20%20%20%20html%20%3D%20document.selection.createRange%28%29.htmlText%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20html%3B%0A%20%20%7D%0A%20%20const%20selection%20%3D%20getSelectionHtml%28%29%3B%0A%20%20const%20%7B%20title%2C%20byline%2C%20content%20%7D%20%3D%20new%20Readability%28%0A%20%20%20%20document.cloneNode%28true%29%0A%20%20%29.parse%28%29%3B%0A%20%20%0A%20%20function%20getFileName%28fileName%29%20%7B%0A%20%20%20%20fileName%20%3D%20fileName.replace%28%22%3A%22%2C%20%22%22%29.replace%28%2F%5C%2F%2Fg%2C%20%22-%22%29%3B%0A%20%20%20%20return%20fileName%3B%0A%20%20%7D%0A%20%20const%20fileName%20%3D%20getFileName%28title%29%3B%0A%20%20%0A%20%20if%20%28selection%29%20%7B%0A%20%20%20%20var%20markdownify%20%3D%20selection%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20var%20markdownify%20%3D%20content%3B%0A%20%20%7D%0A%20%20%0A%20%20if%20%28vault%29%20%7B%0A%20%20%20%20var%20vaultName%20%3D%20%22%26vault%3D%22%20%2B%20encodeURIComponent%28%60%24%7Bvault%7D%60%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20var%20vaultName%20%3D%20%22%22%3B%0A%20%20%7D%0A%20%20%0A%20%20const%20markdownBody%20%3D%20new%20Turndown%28%7B%0A%20%20%20%20headingStyle%3A%20%22atx%22%2C%0A%20%20%20%20hr%3A%20%22---%22%2C%0A%20%20%20%20bulletListMarker%3A%20%22-%22%2C%0A%20%20%20%20codeBlockStyle%3A%20%22fenced%22%2C%0A%20%20%20%20emDelimiter%3A%20%22%2A%22%2C%0A%20%20%7D%29.turndown%28markdownify%29%3B%0A%20%20%0A%20%20var%20date%20%3D%20new%20Date%28%29%3B%0A%20%20const%20convertDate%20%3D%20%28date%29%20%3D%3E%20%7B%0A%20%20%20%20const%20yyyy%20%3D%20date.getFullYear%28%29.toString%28%29%3B%0A%20%20%20%20const%20mm%20%3D%20%28date.getMonth%28%29%20%2B%201%29.toString%28%29%3B%0A%20%20%20%20const%20dd%20%3D%20date.getDate%28%29.toString%28%29%3B%0A%20%20%20%20const%20mmChars%20%3D%20mm.split%28%22%22%29%3B%0A%20%20%20%20const%20ddChars%20%3D%20dd.split%28%22%22%29%3B%0A%20%20%20%20return%20%28%0A%20%20%20%20%20%20yyyy%20%2B%0A%20%20%20%20%20%20%22-%22%20%2B%0A%20%20%20%20%20%20%28mmChars%5B1%5D%20%3F%20mm%20%3A%20%220%22%20%2B%20mmChars%5B0%5D%29%20%2B%0A%20%20%20%20%20%20%22-%22%20%2B%0A%20%20%20%20%20%20%28ddChars%5B1%5D%20%3F%20dd%20%3A%20%220%22%20%2B%20ddChars%5B0%5D%29%0A%20%20%20%20%29%3B%0A%20%20%7D%3B%0A%20%20const%20today%20%3D%20convertDate%28date%29%3B%0A%20%20%0A%20%20const%20fileContent%20%3D%0A%20%20%20%20%22---%22%20%2B%20%22%5Cn%22%20%2B%0A%20%20%20%20%22created%3A%20%22%20%2B%20today%20%2B%20%22%5Cn%22%20%2B%0A%20%20%20%20%22unread%3A%20true%22%20%2B%20%22%5Cn%22%20%2B%0A%20%20%20%20%22reading%3A%20false%22%20%2B%20%22%5Cn%22%20%2B%0A%20%20%20%20%22finished%3A%20false%22%20%2B%20%22%5Cn%22%20%2B%0A%20%20%20%20%22source%3A%20%22%20%2B%20document.URL%20%2B%20%22%5Cn%22%20%2B%0A%20%20%20%20%22type%3A%20%5C%22%5B%5BArticle%5D%5D%5C%22%22%20%2B%20%22%5Cn%22%20%2B%0A%20%20%20%20%22---%22%20%2B%20%22%5Cn%22%20%2B%0A%20%20%20%20markdownBody%3B%0A%20%20document.location.href%20%3D%0A%20%20%20%20%22obsidian%3A%2F%2Fnew%3F%22%20%2B%0A%20%20%20%20%22file%3D%22%20%2B%0A%20%20%20%20encodeURIComponent%28folder%20%2B%20fileName%29%20%2B%0A%20%20%20%20%22%26content%3D%22%20%2B%0A%20%20%20%20encodeURIComponent%28fileContent%29%20%2B%0A%20%20%20%20vaultName%3B%0A%7D%29%3B
```
